\section{Experimental Evaluation}\label{sec:exp}
We evaluate our techniques on two real-world datasets, i.e., \pt{} and \sz{} in this section.
The trajectory dataset of \pt{}~\cite{pt} has 2.39 million of taxi trajectories, 75.67 million of GPS points in total, its maximum trajectory length is 3,490 GPS points.
The trajectories in \pt{} cover several cities around the Porto and has been cleaned for further analysis.
\sz{}~\cite{sz} includes 3.07 million of taxi trajectories with 53.53 GPS points, the maximum trajectory in it has 2,268 GPS points.

In Section~\ref{sec:case}, we evaluate the effectiveness of our proposal by the case studies on \pt{} and \sz{} trajectory dataset, respectively.
We then conduct a user study to demonstrate the superiority of our proposal in three real world applications in Section~\ref{sec:user}.
We perform a qualitative evaluation in Section~\ref{sec:quality} at last.
We conducted all experiments on a machine with Intel i7-8700, 3.2 GHertz CPU, 24 GBytes memory and NVIDIA GeForce GTX1080, 8 GHertz VRAM GPU, running on Windows 10.
We implemented all methods in Java 1.8. The methods call on the Processing 3~\cite{p3} for rendering.


\subsection{Case Study}\label{sec:case}

We demonstrate the effectiveness of our proposal by the case studies in \pt{} (in Section~\ref{sec:pt}) and \sz{} ({in Section~\ref{sec:sz}}).
%In this section, we evaluate our method by presenting the applications on two taxi trajectory datasets: Porto and Shenzhen. We compare the visualizations generated by the full dataset, random sampling and the proposed method from multiple levels of details.

\subsubsection{Case Studies on \pt{}}\label{sec:pt}

\begin{figure*}[t]
	\centering
	\includegraphics[width=0.85\textwidth]{pictures/experiment_study/case_porto.pdf}
	\vspace{-3mm}
	\caption{Effectiveness studies of $\avats$ at dense and sparse regions with detail visualizations in \pt{}.}
	\label{fig:porto}
    \vspace{-6mm}
\end{figure*}

We first refer the cases in Fig.~\ref{fig:teaser} to elaborate the effectiveness of our proposal from the following three aspects.

\stitle{Effect of approaches with different zoom-levels}
Considering zoom level 11, Fig.~\ref{fig:teaser}(A) is the visualization result of full \pt{} trajectory dataset.
Given the sampling rate $\alpha = 1\%$, Fig.~\ref{fig:teaser}(C) and (E) visualized the returning results of uniform random sampling algorithm ($\rand$, see Algorithm~\ref{alg:rand})
and our advanced visual fidelity guaranteed sampling approach ($\avats$, see Algorithm~\ref{alg:plus}), respectively.
Obviously, Fig.~\ref{fig:teaser}(E) looks much more closer to Fig.~\ref{fig:teaser}(A) when comparing with Fig.~\ref{fig:teaser}(C).
In particular, our proposed $\avats$ not only preserves the visual structure of the full dataset,
but also shows the details of these cities which are far away from the center, as the dashed cycles shown in Fig.~\ref{fig:teaser}(E).
However, the details of these dashed cycles in Fig.~\ref{fig:teaser}(C), i.e., the returning result from $\rand{}$, are lost.
This issue turns more serious when we zoom in to the details of the visualization results.
Fig.~\ref{fig:teaser}(H) and (I) are the visualization result of $\rand$ and $\avats$  (with color encoding) at zoom level 15 with sampling rate $\alpha=1\%$.
Comparing with the visualization result of full dataset at such level, as shown in Fig.~\ref{fig:teaser}(G),
the $\rand{}$ in Fig.~\ref{fig:teaser}(H) only returns few trajectories and many information in raw data are lost.
Surprisingly, our $\avats$ in Fig.~\ref{fig:teaser}(I) captures the main sketch of the full dataset, even with more clear details with the help of color encoding.

\stitle{Effect of sampling rate}
We then evaluate the effect of sampling rate in different approaches.
Fig.~\ref{fig:teaser}(B) and (C) are the visualization results of $\rand{}$ with sampling rate $0.1\%$ and $1\%$, respectively.
Fig.~\ref{fig:teaser}(D) and (E) visualized the returning trajectory sets of our $\avats{}$ with sampling rate $0.1\%$ and $1\%$, respectively.
We then have the following observations.
(I) the larger sampling rate, the better visual fidelity of the visualization results, e.g.,
Fig.~\ref{fig:teaser}(C) and (E) are more closer to Fig.~\ref{fig:teaser}(A) when comparing with Fig.~\ref{fig:teaser}(B) and (D), respectively.
(II) the visualization result of $\avats$ with sampling rate $0.1\%$ in Fig.~\ref{fig:teaser}(D)
performs even more better than the result of $\rand{}$ with sampling rate $1\%$ in Fig.~\ref{fig:teaser}(C) to capture the visual structure of the full dataset in Fig.~\ref{fig:teaser}(A).


\stitle{Effect of color encoding}
Next, we present the superiority of color encoding scheme.
Given zoom level 11 and sampling rate $1\%$, Fig.~\ref{fig:teaser}(E) and (F) are the visualization results of our $\avats$ without and with color encoding scheme, respectively.
It is worth to point out the visual clutter in the visualization result of full dataset is serious, as the embedded rectangle shown in Fig.~\ref{fig:teaser}(A).
It also exists in the result of $\avats$, see the embedded rectangle in Fig.~\ref{fig:teaser}(E).
However, the color encoding scheme in Fig.~\ref{fig:teaser}(F) reduces the visual clutter in Fig.~\ref{fig:teaser}(A) and (E) successfully.
%The embedded rectangle in Fig.~\ref{fig:teaser}(F) visualized the result of $\avats$ with color encoding.
Obviously, it provides clear visual structure of the input dataset.
In addition, the visualized results in Fig.~\ref{fig:teaser}(G) and (I) confirm the effectiveness of our proposed color encoding scheme for visual clutter in large dataset again.

We next present the effectiveness of our proposals with different detail views by investigating three regions of interest in \pt{}, as R1, R2, and R3 shown in Fig.~\ref{fig:porto}(A).

% Comments for revise figure: change the current order, R3 first, then R2, last R1 (current order), I am writing in update order, but ask Qiaomu update the figures with the new order.
% h -> a, i -> b
\stitle{Sparse region R1}
R1 is a sparse region and has few trajectories, as the visualization result of full \pt{} dataset shown in Fig.~\ref{fig:porto}(B1).
The reason is the two cities Paredes and Penafiel in R1 are far away from the center of Porto.
Given sampling rate $\alpha=0.5\%$, Fig.~\ref{fig:porto}(B2), (B3) and (B4) are the visualization results of the returning trajectory set from $\rand{}$, $\vats$ and $\avats$ with $\delta=64$, respectively.
As our above statement, the result of $\rand$ almost misses all information in sparse region.
While $\vats$ performs much better than $\rand$ as it provides theoretical visual fidelity guarantee, it still lost detail information.
Taking Fig.~\ref{fig:porto}(B1) as reference, the trajectory bundle and trajectory structure are lost in Fig.~\ref{fig:porto}(B3a) and (B3b).
As expected, our advanced approach $\avats$ in Fig.~\ref{fig:porto}(B4) with perception tolerance value $\delta=64$ did an excellent job to capture the details in the full dataset when comparing with $\vats$ in Fig.~\ref{fig:porto}(B3).
As shown in Fig.~\ref{fig:porto}(B4b), the trajectory sketch of Penafiel is almost the same as it in Fig.~\ref{fig:porto}(B1b), the visualized result of full dataset.


\begin{figure*}[t]
	\centering
	\includegraphics[width=0.85\textwidth]{pictures/experiment_study/case_shenzhen.pdf}
	\vspace{-4mm}
	\caption{Case studies on \sz{} taxi trajectory dataset, sampling rate $\alpha = 1\%$}
	\label{fig:shenzhen}
    \vspace{-3mm}
\end{figure*}

\stitle{Median region R2} It is near to the center of Porto, which has more taxi trajectories than R1, see Fig.~\ref{fig:porto}(A).
As noted in Fig.~\ref{fig:porto}(C1), R2 includes three cities: Ermesinde, Rio Tinto and Valongo.
Fig.~\ref{fig:porto}(C2) and (C3) visualized the returning result of $\avats$ with perception tolerance value $\delta=4$ and $64$, respectively.
Obviously, Fig.~\ref{fig:porto}(C3) has more trajectory branch details than (C2), as the rectangles c and d shown in them.
In other words, the larger perception tolerance value, the more details in this region reserved at zoom level 14.
%Comparing with Fig.~\ref{fig:porto}(C3),
Fig.~\ref{fig:porto}(C4) is the result of $\avats$ which enable color encoding scheme.
Intuitively, Fig.~\ref{fig:porto}(C4) shows its superiority over (C3) to capture the trajectory distributions.
For example, the color of the region f in Fig.~\ref{fig:porto}(C4) is {darker} than the rest two regions $e$ and $g$.
Thus, we can conclude Rio Tinto (region f) has more taxi trajectories than other two cities, which is hard to be concluded via Fig.~\ref{fig:porto}(C3) even (C1), the visualization result of full dataset.
It also confirms the color encoding scheme could enrich the visual information in large trajectory visualization.

\stitle{Dense region R3} It is the center of Porto, which has the highest concentration of the trajectories and causes serious visual clutter, as visualized in Fig.~\ref{fig:porto}(D1).
For example, the structure of trajectories in Fig.~\ref{fig:porto}(D1i) is unclear.
$\avats$ with $\delta=4$ alleviates the visual clutter and preserves the trajectory distribution, see Fig.~\ref{fig:porto}(D2).
Fig.~\ref{fig:porto}(D3) visualized the result of $\avats$ with $\delta=64$, which enhances the visual fidelity of Fig.~\ref{fig:porto}(D2).
Specifically, it preserves more details(see rectangle h) and has a more clear structure in the {densest} region (see rectangle i).
Visually, Fig.~\ref{fig:porto}(D4) is the best among these four visualization results.
It confirms the advantages of $\avats$ with color encoding scheme.

%$\avats$($delta = 4$) greatly alleviates the visual clutter and preserves the framework which basically follows the road network as shown in Fig.~\ref{fig:porto}(B$_2$).
% Furthermore, when setting the interpretation tolerance parameter $delta$ as 64, the structure is more clear as shown in region b of Fig.~\ref{fig:porto}(B$_3$,B$_4$),
%  and have more trajectory details than $\avats$($delta = 4$) as shown in region $a$ of Fig.~\ref{fig:porto}(B$_2$,B$_3$).
%  The trajectories with color encoding further enhance the visualization thus the audiences can compare the traffic flow of two route more easily.




\subsubsection{Case Studies on \sz}\label{sec:sz}
We further evaluate the effectiveness of our proposal by using the taxi trajectories in Shenzhen, China.
The \sz{} trajectory dataset has many different characteristics with \pt{}, e.g., trajectory distribution, city centers, taxi move patterns.
We set sampling rate $\alpha=1\%$ and perception tolerance value $\delta = 64$ in this section.

\stitle{Overview of \sz{}}
Fig.~\ref{fig:shenzhen}(A) is the visualization result of full \sz{} dataset at zoom level 11.
The dense regions in southern of Shenzhen, as the dashed circles shown in Fig.~\ref{fig:shenzhen}(A), are \emph{Baoan, Nanshan, Futian} and \emph{Luohu} districts,
which are the most prosperous commercial regions in this city.
The returning results of $\rand$, $\avats$ and $\avats$ with color encoding scheme are visualized in Fig.~\ref{fig:shenzhen}(B), (C) and (D), respectively.
Not surprisingly,  the visualized result of $\rand$ in Fig.~\ref{fig:shenzhen}(B) is quite different from the full dataset in Fig.~\ref{fig:shenzhen}(A).
$\avats$ in Fig.~\ref{fig:shenzhen}(C) shows it superiority by capturing the overview of \sz{} dataset and even preserves the isolated trajectories, as left-upper corner highlighted in  Fig.~\ref{fig:shenzhen}(C).
It owes to $\avats$ provides theoretical visual fidelity guarantees on the returning result set.
$\avats$ with color encoding further improved the visual fidelity of $\avats$.
Specifically, both Fig.~\ref{fig:shenzhen}(A) and (C) are suffering from visual clutter seriously,
e.g., it is unable to recognize the main roads in the circles a and b as both are full with visualized trajectories.
However, the result of $\avats$ with color encoding, as shown in Fig.~\ref{fig:shenzhen}(D), reduce the visual clutter perfectly.
For example, we can conclude the main roads of circle a and b are these roads with {darker} colors.

We then present the advantages of our proposal in two representative areas, i.e., airport and North railway station, in \sz{} dataset.

\stitle{Airport in \sz{}}
Compare with visualization result of full dataset in Fig.~\ref{fig:shenzhen}(E),
the visualized result of $\rand$ in Fig.~\ref{fig:shenzhen}(F) only includes very few trajectories.
$\avats$ without and with color encoding in Fig.~\ref{fig:shenzhen}(G) and (H) reserve the major structure of the airport area excellent.
Moreover, $\avats$ with color encoding provides richer information by computing the representativeness of trajectories.
For example, the taxi trajectories which pass through G4 and G104 is more than that in Baoan Avenue.
The reason is that the colors of G4 and G104 is {darker} than Baoan Avenue, as notated in Fig.~\ref{fig:shenzhen}(H).

%the random sampling only preserves the trajectories pass through several routes with very high traffic flow(shown as Fig.~\ref{fig:shenzhen}(F)).  Both $\avats$ and $\avats$ with color encoding can visualize the trajectory structure very well. The $\avats$ with color encoding further enriches the information by encoding the trajectory with color. For example, we can observe that there are more trajectories passing through G4 and G104 than Baoan Avenue, which is hard to be discovered from the Fig.~\ref{fig:shenzhen}(E,F,G).

\stitle{North railway station in \sz{}}
We next investigate the visualizations of the full dataset, $\rand$ result set, and $\avats$ result set around North railway station of Shenzhen, which are shown from Fig.~\ref{fig:shenzhen}(I) to (L).
Interestingly, $\avats$ without and with color encoding scheme visualized the overpass near North railway state clearly, as circle c shown in both Fig.~\ref{fig:shenzhen}(K) and (L).
It is not clear in full dataset visualization shown as Fig.~\ref{fig:shenzhen}(Ic) due to visual clutter.
It even disappeared in the visualized result of $\rand$ in Fig.~\ref{fig:shenzhen}(G).
Moreover, it is easy to estimate the traffic flow in $\avats$ visualization result.
For example, the road G94 has a higher road traffic flow than the Minzhi Avenue and Meilong Avenue, as different colors shown in Fig.~\ref{fig:shenzhen}(L).


%Similarly, in the region near to the Shenzhen North Railway Station, the visualization generated by $\avats$ can reveal some road structure such as the \QM{round entrance to the motorway} shown as region c in Fig.~\ref{fig:shenzhen}(K). With the color encoding, we can also easily discover that



\input{sections/Evaluation_user_study.tex}



%\stitle{Overview of the Porto Distinct}
%Figure~\ref{fig:teaser}(A) presents the visualization generated by the whole dataset, from which we can get an overview of the movement patterns in Porto district. For example, large number of trajectories are concentrated in the center of the figure(shown around Figure~\ref{fig:teaser}(A$_1$)), indicating that the most taxi activities are around the \UC{Porto City}. In addition,
%many trajectory clusters distributed across the land, which indicates the locations of other cities in Porto district(shown as the dashed circle in Figure~\ref{fig:teaser}(A)).
%
%We compare the $\avats$ with \textit{uniform random sampling} at the overview.
%Figure~\ref{fig:teaser}(C,E) show the visualization generated by uniform random sampling and $\avats$ respectively. Both of these two sampling methods take 0.01 as the sampling rate. The uniform random sampling almost only preserves the visual structure around the Porto City and the trajectories at the marginal regions are lost.
%The visualization generated by $\avats$ looks close to the whole dataset. Not only the \UC{Porto City} but also the marginal city structures are well preserved, which are shown as the dash circles in Figure~\ref{fig:teaser}(E).
%
%Furthermore, the color encoding further enhances the visualization by revealing the \QM{representativeness} of the trajectories.
%As shown by the rectangle region in Figure~\ref{fig:teaser}(E), there is no clear pattern that can be discovered due to the dense concentration of massive trajectories. While in the same region of Figure~\ref{fig:teaser}(F), some trajectories with high representative scores are highlighted by dark orange color such as F$_1$, which indicates Avenida da Boavista, a main avenue in Porto City.
%%From the overview, $\avats$ can preserve the general structure very well in the comparison with uniform random sampling, and more information of the movement can be visualized with color encoding.
%
%
%An important factor affecting the visual fidelity of sampling results is the sampling rate. Figure~\ref{fig:teaser}(C,B) show the sampling results of random method with sampling rate set as 0.01 and 0.001. With the decreasing of the sampling rate, the shape of the trajectory visualizations clearly shrink to the Porto City and result to the loss of visual fidelity at the marginal region. Figure~\ref{fig:teaser}(E,D) demonstrate the visualization of $\avats$ with the sampling rate of 0.01 and 0.001. We observe that when the sampling rate is decreased, the overview framework of the trajectories remains the same but the trajectories around Porto City are significantly removed since more \QM{blank space/gap} can be found around the Porto City as shown in the rectangle of Figure~\ref{fig:teaser}(D).


%\begin{figure}[t]
%	\centering
%	\vspace{2mm}
%	\includegraphics[width=0.45\textwidth]{pictures/experiment_study/quanlity.png}
%	\caption{Visual quality chart. X axis indicates map scale from detail view to overview; y axis indicate the visual quality. }
%	\vspace{0mm}
%	\label{fig:quality_chart}
%\end{figure}



%Figure~\ref{fig:shenzhen}(A-D) present the overview visualization generated by whole dateset, random sampling, $\avats$ and $\avats$ with color encoding at the top level. The visualization of raw dataset(Figure~\ref{fig:shenzhen}(A)) shows the there are several dense trajectory clusters in southern districts of Shenzhen, including \textit{Baoan}, \textit{Nanshan}, \textit{Futian} and \textit{Luohu} districts, which are the most prosperous commercial zones of Shenzhen. Figure~\ref{fig:shenzhen}(B) presents the trajectories generated by random sampling. We observe that the most of the trajectories sampled by random sampling are located at the commercial zones. On the other hand, the trajectories at the north Shenzhen are missing, thus making the visualization visually different from the whole dataset.
%$\avats$ outperforms random method by guaranteeing the spatial coverage of the whole trajectories thus result in a higher visual fidelity. Further more, some isolate trajectories are still preserved shown in Figure~\ref{fig:shenzhen}(C). $\avats$ with color is able to reveal the spatial distribution of the trajectories. For example, for the regions a, b in Figure~\ref{fig:shenzhen}(A or C), the visualization is unable to explain which region has more taxi activities because both of these two regions are fully covered by trajectories. In Figure~\ref{fig:shenzhen}(D), we find the more trajectories encoded by deep color are found in region a than that of region b, which indicates more trajectories can be found in region a than region b.

%We further evaluate the proposed approach using the taxi trajectories of Shenzhen, a booming city in the southern China and has very different urban form from Porto District. The dataset we used includes 428K taxi trajectories collected from \QM{**} taxis in one day. All the visualization generated by the sampling methods which sets the sampling rates as 0.01. 